---
title: "Vignette"
author: "Chi-Yun Liu, Sih-Yuan Han and Trevor Richardson"
date: "5/1/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r include=FALSE}
library(tidyverse)
```

# COVID-19 (Use Case)

In early 2020, a deadly pandemic spread throughout the world. COVID-19 has claimed millions of lives and public health agencies have struggled to contain the virus and as a result the virus has spread uncontrollably throughout the world. The app we created doesn't necessarily solve the COVID-19 problem but it is designed to help the general public or other experts better visualize the data sets released by the CDC. The CDC has collected millions of rows of data of messy data and our app helps to provide context.

# Packages Used

We created 4 different tabs to visualize our data and each tab required generally the same packages, we will list each tab and describe what each were used for and what version we used:

1. Tidyverse
- This is the foundation of our app and includes the essential functions to make certain aspects of app work. Since our dataset from the CDC was about 9 gigabytes, we filtered out data to include the variables that we needed and saved them to an rds file to save time and resources. Additionally, Tidyverse includes ggplot2 which is what we use to plot our data on a visually appealing graphs.
2. leaflet
3. sf
4. lubridate
5. raster
6. shiny
7. bslib
8. usmap
9. shinydashboard
10. sp
11. rgdal
12. geojsonio

## Packages Versions Used
```{r}
packageVersion("tidyverse")
packageVersion("leaflet")
packageVersion("sf")
packageVersion("lubridate")
packageVersion("raster")
packageVersion("shiny")
packageVersion("bslib")
packageVersion("usmap")
packageVersion("shinydashboard")
packageVersion("sp")
packageVersion("rgdal")
packageVersion("geojsonio")
```
# Data Source and Structure

Data picked up on CDC

[link] https://data.cdc.gov/Case-Surveillance/COVID-19-Case-Surveillance-Public-Use-Data-with-Ge/n8mc-b4w4

- At first, we removed unnecessary columns such as "fips code" and "exposure_yn". Then, we filtered out the data which is not in 2020. After we use "tidyverse" to clean up our data, we merged back fips code that we need, which is 51 states. 

```{r include=FALSE}
readr::read_rds("./DS_Final_App/data/covid19_tidy.rds") -> 
  covid19_tidy
```

```{r}
glimpse(covid19_tidy)
```

# EDA Inputs, Controls, and Outputs

1. First Tab: Covid-19 USmap
- Users may click on the state they are interested in, and the interactive map will automatically shows the specific number of confirmed, recovered, deaths cases and its rank by that state. Users may also click on "clear the map" button to regenerate the map.
2. Second Tab: Plot Analysis
A left panel with 2 tab pages.
- Inputs and Control: Users may choose which type of the data they want to see between 5 options, including "Case", "Death", "Hospitalization", "ICU" and "Underlying". Then users may choose to check the data based on state, race, gender and so on. On the bottom of the panel, users may select the date range to check more detailed data. 
- Outputs:   
The first tab is "Cumulative Data", where users can check the line plot of the data. For example, we can learn from the plot that in the end of 2020, California reaches the highest confirmed case through the states with over one million cases.   
The second tab is "Race Analysis", where users could check that most of the confirmed cases are white, and followed by Black and Asian. 

# Statistical Analysis Inputs, Controls, and Outputs

1. Third Tab: Data Analysis
- Inputs and Control: Users may select the X and Y input to see the plot of the data they are interested in with point or box plot, which would vary by the input type (Categorical or Numeric). On the top right corner, this shiny app allows users to choose whether they want to check the residual plot and QQ plot. 
- Outputs: Based on this tab, we can learn the correlation between input X and Y based on linear model summary, residual plot and QQ plot. 

2. Forth Tab: Ranking
- Inputs and Control: 
- Outputs: 

# Reference
[1] https://data.cdc.gov/Case-Surveillance/COVID-19-Case-Surveillance-Public-Use-Data-with-Ge/n8mc-b4w4

[2] https://stackoverflow.com/questions/25205410/r-shiny-set-datatable-column-width

[3] https://www.kaggle.com/washimahmed/usa-latlong-for-state-abbreviations

[4] https://www.gis-blog.com/create-a-leaflet-map-using-r/

[5] http://www.r-graph-gallery.com/264-control-ggplot2-boxplot-colors.html




